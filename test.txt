$(TARGET_LIBS): $(OBJS)
	$(CC) ${LDFLAGS} -o $< >$@
	#$(CC) ${LDFLAGS} -o $@ $^

$(SRCS:.c=.d):%.d:%.c
	$(CC) $(CFLAGS) -MM $< >$@

include $(SRCS:.c=.d)

.PHONY: clean
clean:
	-${RM} ${TARGET_LIBS} ${OBJS} $(SRCS:.c=.d)
	




CC = gcc # C compiler
CFLAGS = -fPIC -Wall -Wextra -O2 -g # C flags
LDFLAGS = -shared  # linking flags
RM = rm -f  # rm command
SRC1 = first_lib.c
SRC2 = second_lib.c
OBJ1 = $(SRC1:.c=.o)
OBJ2 = $(SRC2:.c=.o)
TARGET_LIB1 = libtarget1.so # target lib
TARGET_LIB2 = libtarget2.so # target lib

all: $(SRC1) ${SRC2} ${OBJ1} ${OBJ2}

$(SRC1):
	$(CC) ${CFLAGS} ${SRC1}
	
